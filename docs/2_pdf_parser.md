# PDF Parser Options

RAG(Retrieval-Augmented Generation) 파이프라인 구축 시 문서 전처리 단계에서 가장 중요한 PDF 파싱 라이브러리 옵션들을 정리합니다.

## 1. PyMuPDF (Fitz)
매우 빠르고 강력한 PDF 처리 라이브러리입니다.

*   **특징**: C 라이브러리인 MuPDF의 Python 바인딩. 텍스트 추출뿐만 아니라 이미지 추출, 렌더링 등 다양한 기능 지원.
*   **장점**:
    *   **속도가 매우 빠름**.
    *   페이지 레이아웃 정보를 포함한 텍스트 추출 가능.
    *   유지보수가 활발함.
*   **단점**: 표(Table) 구조 인식은 다소 약할 수 있음.
*   **추천 상황**: 대량의 문서를 빠르게 처리해야 하거나, 일반적인 텍스트 추출이 목적일 때 가장 무난한 선택 (LangChain의 `PyMuPDFLoader` 등).

## 2. Unstructured
RAG 및 LLM 애플리케이션을 위해 설계된 비정형 데이터 전처리 툴킷입니다.

*   **특징**: PDF뿐만 아니라 HTML, Word, PPT 등 다양한 포맷 지원. "Partitioning" 전략을 사용하여 문서를 의미 있는 청크로 나눔.
*   **장점**:
    *   **RAG 파이프라인에 최적화** (LangChain, LlamaIndex와 강력한 통합).
    *   다양한 전략(fast, hi_res, ocr_only 등) 제공.
    *   복잡한 레이아웃 분석 가능.
*   **단점**: `hi_res` 모드 사용 시 `detectron2`나 `tesseract` 같은 무거운 의존성이 필요할 수 있어 설치가 까다로울 수 있음.
*   **추천 상황**: 문서의 구조(제목, 본문, 목록 등)를 살려서 청킹하고 싶을 때.

## 3. LlamaParse
LlamaIndex에서 만든 LLM 전용 파싱 서비스입니다.

*   **특징**: LLM이 이해하기 좋은 형태(Markdown 등)로 문서를 변환해 줌. 특히 **표(Table)와 복잡한 서식** 처리에 탁월함.
*   **장점**:
    *   기존 파서들이 어려워하는 복잡한 표, 다단 편집 등을 매우 잘 처리함.
    *   결과물이 Markdown 형식이어서 LLM에 바로 입력하기 좋음.
*   **단점**:
    *   **API 서비스**이므로 API Key가 필요하고 사용량 제한/비용이 발생할 수 있음 (부분 유료).
    *   데이터가 외부 서버로 전송됨 (보안 주의).
*   **추천 상황**: 표가 많거나 레이아웃이 매우 복잡한 문서를 처리해야 할 때, 최고의 품질이 필요할 때.

## 4. pdfplumber
PDFMiner를 기반으로 만들어진, 특히 표 추출에 강점이 있는 라이브러리입니다.

*   **특징**: PDF 내부의 상세한 레이아웃 정보(좌표, 폰트 등)에 접근하기 쉬움.
*   **장점**:
    *   **표 추출(Table Extraction) 기능이 강력함**.
    *   시각적 디버깅 기능 제공.
*   **단점**: PyMuPDF보다 속도가 느림.
*   **추천 상황**: 텍스트보다는 문서 내의 **데이터 표**를 추출하는 것이 주 목적일 때.

## 5. pypdf (구 PyPDF2)
순수 Python으로 작성된 가벼운 라이브러리입니다.

*   **특징**: 외부 의존성이 없음.
*   **장점**: 설치가 매우 쉽고 가벼움.
*   **단점**: 복잡한 레이아웃에서는 텍스트 추출 품질이 떨어질 수 있음. 띄어쓰기나 줄바꿈 처리가 부정확한 경우가 많음.
*   **추천 상황**: 아주 단순한 텍스트 추출이나, PDF 병합/분할 등의 작업만 필요할 때.

---

## 결론 및 추천

1.  **기본 추천 (밸런스형)**: **PyMuPDF (Fitz)**
    *   속도와 품질의 균형이 가장 좋습니다. 일반적인 RAG 구축 시 1순위로 고려합니다.

2.  **복잡한 문서 / 표 포함**: **LlamaParse**
    *   API 사용이 가능하다면, 복잡한 문서를 처리하는 데 있어 압도적인 성능을 보여줍니다.

3.  **오픈소스 & 구조화**: **Unstructured**
    *   로컬에서 정교한 파싱(레이아웃 분석 등)을 하고 싶다면 좋은 선택입니다.

